/******************************** GENERAL STYLES ********************************/
body {
	background: var(--bg-page);
	color: var(--text);
	--sidebar-width: 16em;
	display: grid;
	grid-template-columns: 1fr min(var(--post-width), calc(100% - var(--sidebar-width))) var(--sidebar-width) 1fr;
}
a {
	color: var(--links);
	transition: color .2s;
}
a:not(:hover) { text-decoration: none }
a:hover { color: var(--links-hover) }
strong, b { color: var(--bold) }
em, i:not(.fas, .far) { color: var(--italics) }
h1, h2 {
	color: var(--headings);
	font-family: var(--title-font);
}
/* Text highlighting */
::selection {
	background-color: var(--highlight-bg);
	color: var(--highlight);
}
::moz-selection {
	background-color: var(--highlight-bg);
	color: var(--highlight);
}
/* Accessibility skipper */
#skip {
	position: fixed;
	top: -100em;
}

/* Roundness */
#pageheader a, #title,
#blogavatar,
#name-asksubmit a[href*="ask"], #name-asksubmit a[href*="submit"], #description,
#taglinks a,
form,
#blogpages,
#credit-ra a,
#buttons > div,
.post, .postfooter > *, .postfooter div i, .sharelinks .dropdown,
.user .usericon,
.read_more,
.audiowrapper, .audiowrapper .albumart, .audiowrapper .custom_audio_buttons, .audiowrapper .custom_audio_seekbar,
.ask {
	border-radius: var(--roundness);
}
/* Roundness (top) */
#blogpages a:first-child,
.postheader{
	border-top-left-radius: var(--roundness);
	border-top-right-radius: var(--roundness);
}
/* Roundness (right) */
form input {
	border-top-right-radius: var(--roundness);
	border-bottom-right-radius: var(--roundness);
}
/* Roundness (bottom) */
#blogpages a:lasst-child {
	border-bottom-left-radius: var(--roundness);
	border-bottom-right-radius: var(--roundness);
}



/********************************* PAGE HEADER *********************************/
#pageheader {
	background: var(--accent1);
	grid-column: 1 / span 4;
	display: grid;
	grid-template-columns: auto 1fr auto;
	align-items: center;
	column-gap: 1em;
	padding: 0.5em 1em;
}
#pageheader.sticky {
	position: sticky;
	top: 0;
	z-index: 2;
}
#title {
	padding: 0.5rem;
	min-height: var(--title-height);
	border: 0.3rem solid var(--border);
	display: flex;
	align-items: center;
	justify-content: center;
	text-align: center;
}
#title h1 { margin: 0 }
#hiddentitle {
	font-size: 1rem;
	position: fixed;
	top: -100em;
}
#pageheader a {
	background: var(--accent2);
	display: flex;
	--size: 2.5rem;
	width: var(--size);
	height: var(--size);
	align-items: center;
	justify-content: center;
	font-size: 1.5em;
}



/***************************** MAIN CONTENT SECTION *****************************/
main {
	background: rgba(var(--bg--rgb), var(--bg-opacity));
	padding: 0.75em 0.5em;
	position: relative;
}
/* Posts */
article {
	background-color: var(--post);
	margin: 1em 0;
	border: 0.25em solid var(--border);
}
article:first-child { margin-top: 0 }
/* Post header; notes, dates, and like/reblog buttons */
.postheader {
	display: grid;
	grid-template-columns: 1fr 1fr 1fr;
	align-items: center;
	background: var(--accent2);
	padding: 0.25em 0.5em;
}
.postnotecount i { margin-right: 0.5em }
.postdate {
	grid-column: 2;
	justify-self: center;
}
.likereblog {
	grid-column: 3;
	justify-self: end;
	display: flex;
	column-gap: 0.5em;
	align-items: center;
}
.pinnedpost { color: var(--headings) }
.customlike { position: relative }
.customlike .like_button { cursor: pointer }
.customlike .like_button.liked + i { color: var(--like) }
.customlike iframe {
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 1;
	opacity: 0;
}
/* Post body */
.user {
	display: grid;
	grid-template-columns: 2em 1fr;
	column-gap: 0.5em;
	align-items: center;
}
.user.deactivated .username::after {
	content: " (deactivated)";
	font-size: 0.9em;
	opacity: 0.5;
}
.bodyitem {
	margin: 0.5em 1em;
	padding: 0.5em 0;
}
.bodyitem:last-child, .postbody > .bodyitemcontent:last-child { padding-bottom: 0; margin-bottom: 0 }
.bodyitem:not(:last-child) { border-bottom: 0.1em solid var(--accent1) }
.postbody > .bodyitemcontent { padding: 0.5em 1em }
.bodyitem .bodyitemcontent { padding: 0.75em 0.5em 0.5em 1em; }
.bodyitemcontent :first-child, .question :first-child { margin-top: 0 }
.bodyitemcontent :last-child, .question :last-child { margin-bottom: 0 }
.post .title {
	margin: 0;
}
.post .title a {
	display: block;
	text-align: center;
	background: var(--accent1);
	padding: 0.3em 0.5em;
}
.read_more {
	display: block;
	margin: 0 auto;
	background: var(--accent2);
	width: fit-content;
	padding: 0.5em 0.75em;
}
/* Post footer */
.postfooter {
	display: grid;
	grid-template-columns: 2em 1fr;
	margin: 0.75em;
	column-gap: 1em;
}
.postfooter.sharelinks { grid-template-columns: 2em 1fr 2em }
.postfooter > a:first-child,
.postfooter div i {
	width: 2em;
	height: 2em;
	display: flex;
	align-items: center;
	justify-content: center;
	background-color: var(--border);
	color: var(--bg);
}
/* Post footer: tags section */
.postfooter .tags {
	background-color: var(--bg);
	border: 0.125em solid var(--border);
	padding: 0.25em 0.5em;
}
.postfooter .tags:empty { background-color: var(--border) }
.postfooter .tags a { margin-right: 0.75em }
/* Post footer: Share menu */
.postfooter .sharelinks {
	position: relative;
	height: fit-content;
}
.postfooter .sharelinks:not(:hover) .dropdown {
	opacity: 0;
	pointer-events: none;
}
.postfooter .dropdown {
	transition: 0.2s;
	position: absolute;
	bottom: 2.25em;
	left: 50%;
	transform: translateX(-50%);
	background: var(--accent2);
	border: 0.125em solid var(--border);
	text-align: center;
	padding: 0.5em 0.75em;
	z-index: 100;
	width: 13em;
}
.postfooter .dropdown h3 { margin: 0 0 0.5em 0 }
.postfooter .dropdown ul {
	list-style: none;
	margin: 0;
	padding: 0;
}
.postfooter .dropdown li { margin: 0.25em 0 }
/***************************** SPECIAL POST STYLES *****************************/
/* Audio posts */
.audiowrapper {
	--albumsize: 5em;
	background: var(--accent1);
	padding: 1em;
	display: grid;
	grid-template-columns: var(--albumsize) 1fr;
	column-gap: 1em;
	margin: 1em 1em 0;
}
.audiowrapper > span { display: none } /* Bring the hidden player out of the grid */
.audiowrapper .albumart { /* Album art and play/pause button section */
	z-index: 0;
	height: var(--albumsize);
	background-color: var(--text);
	color: var(--bg);
	position: relative;
	display: flex;
	justify-content: center;
	align-items: center;
	overflow: hidden;
}
.audiowrapper .albumart img { /* Album art, if available */
	z-index: -1;
	position: absolute;
	/* should auto-scale and auto-position, but just in case */
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}
.audiowrapper .custom_audio_buttons { /* Play/pause buttons */
	background: rgba(var(--text--rgb), 0.85);
	--size: 40%;
	width: var(--size);
	height: var(--size);
	cursor: pointer;
	transition: opacity .2s;
}
.audiowrapper:not(:hover) .custom_audio_buttons { opacity: 0 }
.audiowrapper .custom_audio_buttons > div {
	width: 100%;
	height: 100%;
}
.audiowrapper .custom_audio_buttons i {
	padding: 10%;
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
}
.audiowrapper .custom_audio_error_icon i { color: red } /* If audio file errors */
.audiowrapper .trackinfo,
.audiowrapper .textinfo { /* General track information */
	display: flex;
	flex-direction: column;
	align-items: center;
	text-align: center;
}
.audiowrapper .trackinfo { justify-content: space-between }
.audiowrapper .trackname { /* Text info: track name */
	text-transform: uppercase;
	color: var(--headings);
	font-size: 1.2em;
}
.audiowrapper .making { font-size: 0.9em } /* Text info: artist and album */
.audiowrapper .album { font-style: italic } /* Differentiate from artist */
.audiowrapper .audio_player { /* Layout of seekbar and timestamps */
	display: grid;
	grid-template-columns: 3em 1fr 3em;
	width: 100%;
	column-gap: 0.5em;
	align-items: center;
}
.custom_audio_current_time { justify-self: right }
.custom_audio_time_left { justify-self: left }
.audiowrapper .custom_audio_seekbar { /* Audio progress bar */
	width: 100%;
	height: 1em;
	border: thin solid var(--links);
	overflow: hidden;
}
.audiowrapper .custom_audio_seekbar_progress { /* Audio progress bar, darkened bit */
	width: 0;
	height: 100%;
	background: var(--links);
}
.custom_audio_time_left::before { content : "-" }
/* Answer posts */
.ask {
	background: var(--accent1);
	padding: 0.75em;
	margin: 1em 1em 0;
}
.ask .question { margin: 0.5em 0 0 1em; }



/*********************************** SIDEBAR ***********************************/
aside {
	background: rgba(var(--bg--rgb), var(--bg-opacity));
	display: flex;
	flex-direction: column;
	padding: 0.75em 0.5em;
}
/* Fixed sidebar (with fixed header or not) */
aside .sticky {
	position: sticky;
	top: 0.5em;
}
aside .sticky.header { top: calc(var(--title-height) + 1.5em) }
/* User icon */
#blogavatar {
	width: 100%;
	border: 0.4em solid var(--border);
}
/* Name, ask/submit, description */
#name-asksubmit {
	display: grid;
	grid-template-columns: 2em 1fr 2em;
	column-gap: 0.5em;
	align-items: center;
	justify-items: center;
}
#blogname {
	grid-column: 2;
	color: var(--headings);
	background-color: var(--accent1);
	width: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	text-align: center;
	height: 3em;
	padding: 0.5em;
}
#name-asksubmit a[href*="ask"], #name-asksubmit a[href*="submit"] {
	width: 1.75em;
	height: 1.75em;
	display: flex;
	align-items: center;
	justify-content: center;
	background-color: var(--accent2);
}
#description {
	border: 0.25em solid var(--border);
	padding: 0.5em;
	text-align: center;
}
/* Tag links and Random/Archive + Credit */
#taglinks, #credit-ra {
	display: grid;
	grid-template-columns: 1fr 1fr;
	column-gap: 0.5em;
	row-gap: 0.5em;
	margin: 0.75em 0;
	text-align: center;
}
#taglinks a, #credit-ra a {
	background-color: var(--accent2);
	padding: 0.25em 0.5em;
	display: flex;
	align-items: center;
	justify-content: center;
}
#credit-ra.random:not(.archive) #randomlink,
#credit-ra.archive:not(.random) #archivelink,
#creditlink { grid-column: 1 / span 2 }
/* Search bar */
form {
	display: grid;
	grid-template-columns: auto 1fr;
	align-items: center;
	border: 0.25em solid var(--border);
	margin: 0.75em 0;
}
form label {
	position: fixed;
	top: -100em;
}
form i.fa-search {
	background-color: var(--border);
	color: var(--bg);
	height: 100%;
	display: flex;
	justify-content: center;
	align-items: center;
	border-right: 0.25em solid var(--border);
	padding: 0 0.2em;
}
form input {
	width: 100%;
	background-color: var(--bg);
	color: var(--text);
	border: none;
	padding: 0.25em 0.5em;
}
/* Custom page links */
#blogpages {
	border: 0.25em solid var(--border);
	margin: 0.75em 0;
}
#blogpages a {
	display: block;
	text-align: center;
	padding: 0.3em;
}
#blogpages a:not(:last-child) { border-bottom: thin solid var(--accent2) }
#blogpages a.current-page { background-color: var(--accent2) }



/******************* BACK TO TOP / COLOR MODE TOGGLE BUTTONS *******************/
#buttons {
	position: fixed;
	bottom: 0;
	right: 0;
	z-index: 100;
}
#buttons > div {
	background: var(--accent1);
	border: 0.15em solid var(--border);
	--size: 2em;
	width: var(--size);
	height: var(--size);
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0.5em;
	cursor: pointer;
	opacity: 0.8;
}
#buttons > div:hover {
	opacity: 1;
	color: var(--links);
}
#tmblriframe i { transition: transform .4s }
#buttons #tmblriframe.active i {
	transform: rotate(-90deg);
	color: var(--links-hover);
}
.tmblr-iframe.tmblr-iframe--unified-controls {
	position: fixed;
	bottom: 0;
	top: unset;
	right: 3em;
}
.tmblr-iframe.tmblr-iframe--unified-controls:not(.active) { display: none }
body:not(.light) .fa-moon, body.light .fa-sun { display: none }



/****************************** RESPONSIVE SIZING ******************************/
@media (min-width: 47em) {
	#blogavatar.circle { margin-bottom: 0.5em }
}

@media (max-width: 47em) {
	/* Moving sidebar to bottom of blog */
	body {
		grid-template-columns: 1fr min(var(--post-width), 100%) 1fr;
	}
	
	aside {
		grid-row: 3;
		grid-column: 1 / span 3;
		--avatar-size: 5em;
		border-top: 0.5em solid var(--border);
	}
	
	#blogavatar {
		width: var(--avatar-size);
		height: var(--avatar-size);
		position: absolute;
	}
	
	#name-asksubmit {
		display: grid;
		height: var(--avatar-size);
		grid-column: 2;
		grid-template-columns: 1fr 1fr;
		grid-template-rows: 1fr 1fr;
		row-gap: 0.25em;
	}
	#blogname {
		grid-row: 1;
		grid-column: 1 / span 2;
		align-self: top;
		height: unset;
		border-radius: var(--roundness);
	}
	#name-asksubmit > a { width: 100% }
	
	.postfooter .dropdown {
		left: unset;
		transform: unset;
		right: -0.5em;
	}
}

@media (max-width: 47em) and (min-width: 31em) {
	/* Rearranging sidebar */
	aside {
		grid-row: 3;
		grid-column: 1 / span 3;
		flex-direction: row;
		position: relative;
	}
	aside .sticky {
		display: grid;
		grid-template-columns: var(--avatar-size) 1fr 1fr;
		column-gap: 1em;
		row-gap: 1em;
	}
	#description {
		grid-row: 2 / span 2;
		grid-column: 1 / span 2;
		width: 100%;
		vertical-align: middle;
	}
	#taglinks, form, #blogpages, #credit-ra {
		height: 100%;
		margin: 0;
	}
	#credit-ra {
		grid-row: 3;
		grid-column: 3;
	}
	#blogpages {
		grid-column: 1 / span 3
	}
}

@media (max-width: 31em) {
	body { font-size: 90% }
	#name-asksubmit {
		margin: 0 0 0.75em var(--avatar-size);
		padding-left: 0.5em;
	}
}